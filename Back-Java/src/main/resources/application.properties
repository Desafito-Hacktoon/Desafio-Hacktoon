spring.application.name=mapblu
spring.main.allow-bean-definition-overriding=true

spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${POSTGRES_DB:city_ops}}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:${POSTGRES_USER:city_user}}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:${POSTGRES_PASSWORD:city_pass}}
spring.datasource.driver-class-name=org.postgresql.Driver

spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:update}
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.timeout=2000ms
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0

management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
management.metrics.export.prometheus.enabled=true

openrouter.api.key=${OPENROUTER_API_KEY:}
openrouter.api.base-url=https://openrouter.ai/api/v1
openrouter.api.model=${OPENROUTER_MODEL:}
openrouter.api.timeout=60000
openrouter.api.max-retries=3
openrouter.api.retry-delay-ms=1000
openrouter.api.max-tokens=${OPENROUTER_MAX_TOKENS:4000}
openrouter.api.temperature=${OPENROUTER_TEMPERATURE:0.7}
openrouter.api.max-tokens-classificacao=${OPENROUTER_MAX_TOKENS_CLASSIFICACAO:50}
openrouter.api.temperature-classificacao=${OPENROUTER_TEMPERATURE_CLASSIFICACAO:0.2}

relatorios.ia.diario.cron=0 0 6 * * *
relatorios.ia.semanal.cron=0 0 8 * * 0
relatorios.ia.mensal.cron=0 0 9 1 * *
relatorios.ia.cache-ttl-diario=86400
relatorios.ia.cache-ttl-semanal=604800
relatorios.ia.cache-ttl-mensal=2592000

ai.rate-limit.max-requests-per-minute=10
ai.rate-limit.max-tokens-per-day=1000000

logging.level.com.moredevs.mapblu=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

jwt.secret=${JWT_SECRET:your-256-bit-secret-key-change-in-production-minimum-32-characters}
jwt.expiration=${JWT_EXPIRATION:86400000}

security.allowed-origins=${SECURITY_ALLOWED_ORIGINS:http://localhost:4200,http://localhost:3000}
security.cors.max-age=3600
